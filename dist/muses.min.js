!function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(u)return u(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[r]={exports:{}};t[r][0].call(l.exports,(function(e){return o(t[r][1][e]||e)}),l,l.exports,e,t,n,i)}return n[r].exports}for(var u="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";var i={};t.exports=function(e){if("undefined"==typeof window)return null;var t=window.OfflineAudioContext||window.webkitOfflineAudioContext,n=window.AudioContext||window.webkitAudioContext;if(!n)return null;"number"==typeof e&&(e={sampleRate:e});var o=e&&e.sampleRate;if(e&&e.offline)return t?new t(e.channels||2,e.length,o||44100):null;var u=i[o];if(u)return u;try{u=new n(e)}catch(e){u=new n}return i[u.sampleRate]=i[o]=u,u}},{}],2:[function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};!function(i){if("object"==typeof t&&"object"==typeof t.exports){var o=i(e,n);void 0!==o&&(t.exports=o)}else"function"==typeof define&&define.amd&&define(["require","exports","audio-context"],i)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTrack=t.AudioChannel=t.MixingConsole=void 0;const n=i(e("audio-context"));class o{constructor(e){this.channels=[],this.ctx=e||(0,n.default)()}addChannel(e){const t=new u(this);return t.id=e||this.channels.length.toString(),this.channels.push(t),t}getChannel(e){const t=this.channels.findIndex((t=>t.id===e));return this.channels[t]||null}}t.MixingConsole=o;class u{constructor(e){this.tracks=[],this.id="N/A",this.console=e;const t=this.console.ctx;this.inputNode=new GainNode(t,{gain:1}),this.outputNode=new GainNode(t,{gain:1}),this.gainNode=new GainNode(t,{gain:1}),this.stereoPannerNode=new StereoPannerNode(t,{pan:0}),this.LowEQNode=new BiquadFilterNode(t,{type:"lowshelf",Q:1,gain:0}),this.MidEQNode=new BiquadFilterNode(t,{type:"peaking",Q:1,gain:0}),this.HighEQNode=new BiquadFilterNode(t,{type:"highshelf",Q:1,gain:0}),this.inputNode.connect(this.LowEQNode).connect(this.MidEQNode).connect(this.HighEQNode).connect(this.stereoPannerNode).connect(this.gainNode).connect(this.outputNode).connect(t.destination)}addTrack(e){return e.output(this),this}input(e){if(e instanceof r)return this.addTrack(e),e;const t=new r(e,this.console.ctx);return this.addTrack(t),t}set pan(e){this.stereoPannerNode.pan.value=e}get pan(){return this.stereoPannerNode.pan.value}set volume(e){this.gainNode.gain.value=e}get volume(){return this.gainNode.gain.value}set lowEQ(e){this.LowEQNode.gain.value=e}get lowEQ(){return this.LowEQNode.gain.value}set midEQ(e){this.MidEQNode.gain.value=e}get midEQ(){return this.MidEQNode.gain.value}set highEQ(e){this.HighEQNode.gain.value=e}get highEQ(){return this.HighEQNode.gain.value}set muted(e){this.outputNode.gain.value=!0===e?0:1}get muted(){return!(this.outputNode.gain.value>0)}fadeOut(e=2e3){const t=this;return"number"!=typeof e&&(e=2e3),new Promise(((n,i)=>{const o=2/e*10,u=setInterval((()=>{if(t.inputNode.gain.value<=0)return t.inputNode.gain.value=0,clearInterval(u),n(!0);t.inputNode.gain.value-=o}),2)}))}fadeIn(e=2e3){const t=this;return"number"!=typeof e&&(e=2e3),new Promise(((n,i)=>{const o=2/e*10,u=setInterval((()=>{if(t.inputNode.gain.value>=1)return t.inputNode.gain.value=1,clearInterval(u),n(!0);t.inputNode.gain.value+=o}),2)}))}}t.AudioChannel=u;class r{constructor(e,t){if("string"==typeof e){const t=document.createElement("audio");t.src=e,t.controls=!1,t.volume=1,t.load(),e=t}this.audioElement=e,this.sourceNode=t.createMediaElementSource(this.audioElement),this.sourceNode.disconnect()}output(e){if(-1!==e.tracks.findIndex((e=>e===this)))return!0;this.sourceNode.disconnect(),this.sourceNode.connect(e.inputNode),e.tracks.push(this)}set volume(e){this.audioElement.volume=e}get volume(){return this.audioElement.volume}set loop(e){this.audioElement.loop=e}get loop(){return this.audioElement.loop}set muted(e){this.audioElement.muted=e}get muted(){return this.audioElement.muted}set time(e){this.audioElement.currentTime=e}get time(){return this.audioElement.currentTime}play(){return this.audioElement.play()}get playing(){return!this.audioElement.paused}get paused(){return this.audioElement.paused}pause(){return this.audioElement.pause()}stop(){return this.audioElement.pause(),this.audioElement.currentTime=0}}t.AudioTrack=r,"object"==typeof window&&(window.muses={MixingConsole:o,AudioChannel:u,AudioTrack:r})}))},{"audio-context":1}]},{},[2]);
